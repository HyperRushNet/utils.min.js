!function(){"use strict";const t={storage:{get(e,n=null){try{const t=localStorage.getItem(e);return null===t?n:JSON.parse(t)}catch{localStorage.removeItem(e);return n}},set(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch(t){throw new Error(`utils.storage.set failed for "${e}": ${t.message}`)}},remove(e){localStorage.removeItem(e)},clear(){localStorage.clear()}},geo:{getCurrent(){return new Promise(((e,n)=>{if(!navigator.geolocation)return n(new Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:l,accuracy:o}=t.coords;e({lat:n,lng:l,accuracy:o})}),(t=>{const e={[t.PERMISSION_DENIED]:"Location permission denied",[t.POSITION_UNAVAILABLE]:"Location unavailable",[t.TIMEOUT]:"Location request timeout"};n(new Error(e[t.code]||"Unknown geolocation error"))}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5})}))}},dom:{createElement(e,n={}){const l=document.createElement(e);if(n.class??n.className){const o=n.class??n.className;"string"==typeof o?l.className=o:Array.isArray(o)?l.classList.add(...o):l.classList.add(...o.split(" "))}void 0!==n.text?l.textContent=n.text:void 0!==n.html&&(l.innerHTML=n.html),n.attrs&&Object.entries(n.attrs).forEach((([e,n])=>l.setAttribute(e,n))),n.on&&Object.entries(n.on).forEach((([e,n])=>{const o=e.toLowerCase().replace(/^on/,"");l.addEventListener(o,n)})),n.dataset&&Object.assign(l.dataset,n.dataset);return l}},perf:{measure(e){const n=performance.now(),l=e();return l&&"function"==typeof l.then?l.then((()=>performance.now()-n)):performance.now()-n},debounce(e,n){let l;return(...t)=>{clearTimeout(l),l=setTimeout((()=>e.apply(this,t)),n)}},throttle(e,n){let l=0;return(...t)=>{const o=Date.now();if(o-l>=n)return l=o,e.apply(this,t)}}},id:function(){let e=0,n=0;return{create(l="id"){let o=Date.now();return o===e?n++:(n=0,e=o),`${l}-${o}-${n}-${Math.random().toString(36).substr(2,5)}`}}}();void 0!==window&&(window.utils=t),void 0!==module&&module.exports&&(module.exports=t)}();
